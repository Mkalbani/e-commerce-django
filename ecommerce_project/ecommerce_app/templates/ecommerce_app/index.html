<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Store</title>
    <!-- Add Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Add your custom CSS styles here -->
    <link rel="stylesheet" href="custom.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Add futuristic CSS styles -->
    <style>
        /* Style for product cards */
        .futuristic-card {
            background-color: #f8f8f8; /* Slight grey background */
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2); /* Shadow effect */
            transition: transform 0.2s; /* Smooth transition for hover effect */
        }

        /* Hover effect for product cards */
        .futuristic-card:hover {
            transform: scale(1.05); /* Enlarge on hover */
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">E-commerce Store</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- Navigation links -->
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    {% if user.is_authenticated %}
                    <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
                    {% else %}
                    <a class="nav-link" href="{% url 'login' %}">Log In</a>
                    {% endif %}
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/cart/">Cart</a>
                </li>
                <!-- Add the Register link below -->
                {% if not user.is_authenticated %}
                <a class="nav-link" href="/register/">Register</a>
                {% endif %}
            
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row">
            <!-- Product listings -->
            <!-- <div class="col-md-4">
                <div class="card mb-4 futuristic-card">
                    <img src="/static/images/product_image_1.png" class="card-img-top" alt="Product 1">
                    <div class="card-body">
                        <h5 class="card-title">Product 1</h5>
                        <p class="card-text">Stay connected and active with our cutting-edge smartwatch. Track your fitness goals, receive notifications, and make a style statement all from your wrist. The perfect companion for a tech-savvy lifestyle.</p>
                        <p class="card-text">$99.99</p>
                        <button class="btn btn-primary futuristic-btn" onclick="addToCart(1)">Add to Cart</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4 futuristic-card">
                    <img src="/static/images/product_image_2.jpg" class="card-img-top" alt="Product 2">
                    <div class="card-body">
                        <h5 class="card-title">Product 2</h5>
                        <p class="card-text">Never run out of power on the go! Our portable power bank ensures your devices stay charged wherever you are. Compact, reliable, and ready to keep you connected when you need it most.</p>
                        <p class="card-text">$49.99</p>
                        <button class="btn btn-primary futuristic-btn" onclick="addToCart(2)">Add to Cart</button>
                    </div>
                </div>
            </div> -->
            {% for product in products %}
            <div class="col-md-4">
                <div class="card mb-4 futuristic-card">
                    <img src="{% load static %}{% static product.image %}" alt="{{ product.name }} image">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text">{{ product.description }}</p>
                        <p class="card-text">${{ product.price }}</p>
                        <form action="{% url 'add_to_cart' %}" method="post" id="add-to-cart-form">
                            {% csrf_token %}
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <button type="submit" class="btn btn-primary futuristic-btn">Add to Cart</button>
                        </form>
                        
                        <script>
                            $(document).ready(function() {
                                $('#add-to-cart-form').submit(function(event) {
                                    event.preventDefault();
                        
                                    // Get the product ID from the form.
                                    var productId = $('#add-to-cart-form input[name="product_id"]').val();
                        
                                    // Make an AJAX request to the cart URL endpoint.
                                    $.ajax({
                                        url: '/cart/',
                                        type: 'POST',
                                        data: {
                                            product_id: productId
                                        },
                                        success: function() {
                                            // The product has been added to the cart.
                                            // Update the cart icon to show the new number of items in the cart.
                                            // ...
                                        }
                                    });
                                });
                            });
                        </script>
                        
                                            </div>
                </div>
            </div>
            {% endfor %}
            
            <!-- Add more product listings if needed -->
        </div>
    </div>

    <!-- Add Bootstrap JS and jQuery (required for Bootstrap) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Add your custom JavaScript scripts here -->
    <script>
        // Function to load the Home content
        function loadHome() {
            $('#content').html('<h1>Welcome to E-commerce Store - Home Page</h1>');
        }

        // Function to load the Products content
        function loadProducts() {
            $('#content').html('<h1>Our Products</h1><p>Product listings go here.</p>');
        }

        // Function to load the Cart content
        function loadCart() {
            $('#content').html('<h1>Your Shopping Cart</h1><p>Cart contents go here.</p>');
        }
        
        // Function to handle adding a product to the cart (simulated)
        function addToCart(productId) {
            // Simulate adding the product to the cart
            alert('Product added to cart. Product ID: ' + productId);
        }
    </script>
</body>
</html>
